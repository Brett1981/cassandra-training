<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>C* Primer: Part 01 - Cassandra and Modelling Basics</title>

		<meta name="description" content="A presentation to give insight into the basics of C* and data modelling">
		<meta name="author" content="Christopher Reedijk | Gary Stewart">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Include the appropriate print stylesheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
		<style type="text/css">
	        .ING {
	        	color: #ff6600;
	        	font-weight: bold;
	        }
	        .DARK_ORANGE {
	        	color: #FF0000;
	        }
	        .ING_DARK_BLUE {
	        	color: #000066;
	        }
	        .ING_LIGHT_BLUE {
	        	color: #B4C3E1;
	        }
	        .ING_GREY {
	        	color: #969696;
	        }
	        .ING_DARK_GREY {
	        	color: #5F5F5F;
	        }
	        .BLACK {
	        	color: #000000;
	        }
	        .WHITE {
	        	color: #FFFFFF;
	        }
	        .NOBORDER_IMG {
	        	border: 0;
	        	border-color: black;
	        }
	        /*.revael header{
				position:absolute;
				top: -50%;
				left: -50%;
			}*/
			.footer_left{
				position:fixed;
				bottom: -60px;
				left: -2%;
			}
			.footer_right{
				position:fixed;
				bottom: -60px;
				right: -1%;
			}
			.footer_center{
				position:fixed;
				bottom: -60px;
				left: 44%;
				right: 44%;
			}
			.reveal pre code {
				display: block;
				padding: 5px;
				overflow: auto;
				max-height: 400px;
				word-wrap: normal;
				background: rgba(0, 0, 0, 0.7);
				color: #DCDCDC;
			}
			.reveal pre {
				display: block;
				position: relative;
				width: 90%;
				margin: 15px auto;
				text-align: left;
				font-size: 0.55em;
				font-family: monospace;
				line-height: 1.2em;
				word-wrap: break-word;
				background: rgba(0, 0, 0, 0);
				box-shadow: 0px 0px 6px rgba(0, 0, 0, 0);
			}
			.reveal blockquote {
				display: -webkit-box;
			    -webkit-box-orient: vertical;
			    -webkit-box-pack: center;
			    -webkit-box-align: center;
			  
			    display: -moz-box;
			    -moz-box-orient: vertical;
			    -moz-box-pack: center;
			    -moz-box-align: center;
			  
			    display: box;
			    box-orient: vertical;
			    box-pack: center;
			    box-align: center;

				position: fixed;
				top: -400px;
				bottom: -425px;
				width: 100%;
				margin: 5px auto;
				padding: 5px;
				font-style: normal;
				background: rgba(0, 0, 0, 0.85);
				box-shadow: 0px 0px 0px rgba(0, 0, 0, 0);
				z-index:-1;
			}
			.reveal section img {
				margin: 15px 0px;
				background: rgba(255, 255, 255, 0.12);
				border: 0px solid #eeeeee;
				box-shadow: 0 0 0px rgba(0, 0, 0, 0.15);
			}
			.reveal table {
				margin: auto;
				border-collapse: collapse;
				border-spacing: 0; 
			}
			.reveal table th {
				font-weight: bold; 
			}
			.reveal table th,
			.reveal table td {
				text-align: left;
				padding: 0.2em 0.5em 0.2em 0.5em;
				border-bottom: none; 
			}
			.reveal table tr:last-child td {
				border-bottom: none; 
			}
			.reveal .slide-background.present {
				opacity: 1;
				visibility: visible;
			}
			.reveal {
				font-family: rockwell, "Open Sans", sans-serif;
				/*font-family: "Open Sans", sans-serif;*/
				font-size: 30px;
				font-weight: normal;
				letter-spacing: -0.02em;
				color: #eeeeee;
			}
			.reveal.rtl .slides,
			.reveal.rtl .slides h1,
			.reveal.rtl .slides h2,
			.reveal.rtl .slides h3,
			.reveal.rtl .slides h4,
			.reveal.rtl .slides h5,
			.reveal.rtl .slides h6 {
				direction: rtl;
				font-family: rockwell, "Open Sans", sans-serif;
			}
			.reveal h1,
			.reveal h2,
			.reveal h3,
			.reveal h4,
			.reveal h5,
			.reveal h6 {
				margin: 0 0 20px 0;
				color: #eeeeee;
				font-family: rockwell, "Open Sans", sans-serif;
				/*font-family: "Montserrat", Impact, sans-serif;*/
				line-height: 1em;
				letter-spacing: 0.01em;
				text-transform: none;
				text-shadow: none;
				word-wrap: break-word; 
			}
			.reveal em {
				font-style: italic;
				font-family: rockwell, "Open Sans", sans-serif;
			}
    </style>
    <link rel="shortcut icon" href="./images/ing_nl_favicon.ico">
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<medium class="footer_left">#CassandraPrimer</medium>
				<medium class="footer_right"><a href="http://twitter.com/@ingnl" target="_blank"><span class="WHITE">@ingnl</span></a></medium>
				<section>				
					<section data-background="./images/ing_bg_stretch.png">
	                    <blockquote style="vertical-align: bottom">
	                    	<br>
							<h1><scan class="WHITE">C* Primer</scan></h1>
	                        <br>
							<h2><scan class="ING">Part 01: Cassandra and Modeling Basics</scan></h2>
	                        <br>
							<pre>
								<code data-trim style="font-size: 26px; margin-top: 10px; margin-bottom: 10px; overflow-y: hidden !important">cqlsh> SELECT * FROM presenters WHERE eventname='CassandraPrimer' AND company='ING';

   eventname       | company | name                | title        | area | twitter
  -----------------+---------+---------------------+--------------+------+-----------
   CassandraPrimer | ING     | Christopher Reedijk | Dev Engineer | NL   | @creedijk
   CassandraPrimer | ING     | Gary Stewart        | Dev Engineer | NL   | @Gaz_GandA

(2 rows)
								</code>
							</pre>
							<!-- <img width=25% src="./images/ing_nl.jpg" alt="ING"> -->
							<br><medium>ING Netherlands (<a href="http://twitter.com/@ingnl"><span class="ING">@ingnl</span></a>)</medium>
							<br>
						</blockquote>
					</section>				
					<section data-background="./images/ing_bg_stretch.png">
	                    <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr>
	                    			<td height="10%" style="text-align:center;vertical-align:top"><em>a little bit about us</em></td>
	                    		</tr>
	                    		<tr>
	                    			<td height="90%" style="text-align:center;color:#ffffff;vertical-align:middle">
	                    				<table>
											<tr>
												<td width=50% style="text-align:center"><img width="150" height="200" src="./images/gary_social.jpg" alt="Gary"></td>
												<td width=50% style="text-align:center"><img width="150" height="200" src="./images/chris_social.jpg" alt="Chris"></td>
											</tr>
											<tr>
												<td width=50% style="text-align:center"><br>Gary Stewart</td>
												<td width=50% style="text-align:center"><br>Christopher Reedijk</td>
											</tr>
											<tr>
												<td width=50% style="text-align:center">
													<br>
													<ul>
														<li>Dev Engineer</li>
														<li>Love/hate relationship with C*</li>
														<li>14 years of experience in IT</li>
														<li>@ING since: 01-01-2012</li>
													</ul>
												</td>
												<td width=50% style="text-align:center">
													<br>
													<ul>
														<li>Dev Engineer</li>
														<li>Back-end guy</li>
														<li>10 years of experience in IT</li>
														<li>@ING since: 01-01-2011</li>
													</ul>
												</td>
											</tr>
										</table>
	                    			</td>
	                    		</tr>
	                    	</table>
						</blockquote>
					</section>
				</section>

                <section>
                    <section data-background="./images/zen_hans.jpg">
                    	<blockquote>
                        	<h1>3 Challenges</h1>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>challenge 1</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<h1>Improve <span class="ING">availability</span><br>without trading <span class="ING">consistency</span></h1>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%" >
	                    			<td style="text-align:center;vertical-align:middle"><em>availability & consistency</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
			                            			<h1>Consequences of not being <span class="ING">available</span></h1>
							                        <img src="./images/challenge1_ING_outage.jpg" alt="ING outage">
							                        <img src="./images/challenge1_ING_outage_1.jpg" alt="ING outage">
							                        <br><img src="./images/challenge1_ING_outage_2.jpg" alt="ING outage">
							                        <br><br><small>source: <a href="http://www.nu.nl" target="_blank"><span class="ING">nu.nl</span></a></small>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>availability & consistency</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
			                            			<h1>Consequences of not being <span class="ING">consistent</span></h1>
                        							<img src="./images/InsufficientFunds.jpg" alt="Insuffiecient funds">
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>challenge 2</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
			                            			<h1>Aim to be <span class="ING">easier</span> scalable<br>Changes are happening at an <span class="ING">increasing</span> pace</h1>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>easier scalable</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
			                            			<h1>Stop focusing on the<br><span class="ING">expected</span> load</h1>
							                        <img width=30% src="./images/web-yester.png" alt="Web yesterday">
							                        <br><medium>yesterday</medium>
							                        <br><br><small>source: <a href="http://bradfrostweb.com/blog/web/responsive-web-design-missing-the-point/" target="_blank"><span class="ING">bradfrostweb.com</span></a></small>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>easier scalable</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
			                            			<h1>Start focusing on the<br><span class="ING">unexpected</span> load</h1>
							                        <table class="stretch">
							                        	<tr>
							                        		<td width=15%>&nbsp</td>
								                            <td width=35% style="text-align: center;"><img width=100% src="./images/web-now.png" alt="Web now"></td>
								                            <td width=35% style="text-align: center;"><img width=100% src="./images/web-tomorrow.png" alt="Web tomorrow"></td>
								                            <td width=15%>&nbsp</td>
								                        </tr>
								                        <tr>
								                        	<td width=15%>&nbsp</td>
								                            <td height=10% width=35% style="text-align: center;"><medium>today</medium></td>
								                            <td height=10% width=35% style="text-align: center;"><medium>tomorrow</medium></td>
								                            <td width=15%>&nbsp</td>
								                        </tr>
								                        <tr>
								                            <td colspan=4 style="text-align: center;"><small>source: <a href="http://bradfrostweb.com/blog/web/responsive-web-design-missing-the-point/" target="_blank"><span class="ING">bradfrostweb.com</span></a></small></td>
								                        </tr>
								                    </table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>challenge 3</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
			                            			<h1>Adopt <span class="ING">new</span> ways of thinking<br>Become the top <span class="ING">engineering</span> company</h1>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
	                    </blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>new way of thinking</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
													<h1>ING's <span class="ING">culture</span> is changing fast.<br>Waterfall to Scrum to DevOps in less than <span class="ING">2 years</span></h1>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                    <section data-background="./images/zen_hans.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em>new way of thinking</em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td width="10%"></td>
			                            		<td width="80%"></td>
			                            		<td width="10%"></td>
			                            	</tr>
			                            	<tr>
			                            		<td></td>
			                            		<td>
			                            			<h2>Aim to approach problems as <span class="ING">green field</span></h2><br>
						                            <h2><span class="ING">"Un-learn"</span> principles that don't scale</h2><br>
						                            <h2><span>Use <span class="ING">cache</span> correctly!</h2><br>
						                            <h2>Reduce <span class="ING">locking</span> (transaction)</h2><br>
			                            		</td>
			                            		<td></td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
                    </section>
                </section>

				<section>
					<section data-background="./images/zen_whitestone_2.jpg">
                    	<blockquote>
                        	<h1>Cassandra Internals</h1>
                    	</blockquote>
                    </section>
	                <section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">DataStax and Cassandra</span></h1><br>
				                    				<table width="100%" height="100%">
						                            	<tr>
						                            		<td width="70%" style="text-align:left; vertical-align:middle">
									                            <h3>Founded in 2010 by Jonathan Ellis and Matt Pfeil</h3>
											                    <h3>80% Apache Cassandra code contribution</h3>
											                    <h3>Offer commercial support for DataStax Enterprise version of Cassandra</h3>
											                    <h3>DataStax Enterprise integrates Search and Analytics</h3>
											                    <h3>Head Quarter in San Francisco Bay area</h3>
											                    <h3>EMEA office opened in March 2013</h3>
						                            		</td>
						                            		<td width="30%" style="text-align:center; vertical-align:middle;background-color:white">
						                            			<img width=100% src="./images/datastax_logo.jpg" alt="Cassandra" style="background-color:white;">
						                            			<img width=100% src="./images/cassandra.png" alt="Cassandra" style="background-color:white;">
															</td>
						                            	</tr>
						                            </table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
	                </section>
	                <section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="100%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td style="text-align:center;vertical-align:middle">
				                    				<table width="100%">
						                            	<tr>
						                            		<td height="90%" style="text-align:center;vertical-align:middle">
																<h1><span class="ING">Native Protocol / DataStax Drivers</span></h1>
							                    				<table width="100%" height="100%">
									                            	<tr>
									                            		<td width="54%" style="text-align:left; vertical-align:middle">
														                    <h3>CQL3 Only</h3>
														                    <h3>Fully asynchronous protocol, using Netty</h3>
														                    <h3>Server notifications</h3>
														                    <br>
														                    <h3>Java, C#, Python, node.js and Ruby, ...</h3>
														                    <h3>Many policies, including:</h3>
														                    <p style="padding-left:0.5em">TokenAwarePolicy, DowngradeConsistencyRetryPolicy, etc...</p><br>
														                    <h3>Metrics (<a href="http://metrics.codahale.com/"><span class="ING">codahale</span></a>) included</h3>
									                            		</td>
									                            		<td width="46%" style="text-align:center; vertical-align:middle">
	                        												<pre><code class="xml" style="font-size: 26px; margin-top: 10px; margin-bottom: 10px; overflow-y: hidden !important; overflow-x: hidden !important">
<dependency>
    <groupId>com.datastax.cassandra</groupId>
    <artifactId>cassandra-driver-core</artifactId>
    <version>2.0.8</version>
</dependency>
	                        												</code></pre>
																		</td>
									                            	</tr>
									                            </table>
						                            		</td>
						                            	</tr>
						                            </table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
	                </section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">Apache Cassandra</span></h1>
													<p>Created by Avinash Lakshman and Prashant Malik at Facebook</p>
													<br>
													<table width=100%>
														<tr>
															<th style="text-align:center;vertical-align:top" class="ING" width=50%><h3><span class="ING">Cassandra is</span></h3></th>
															<th style="text-align:center;vertical-align:top" class="ING" width=50%><h3><span class="ING">Cassandra is not</span></h3></th>
														</tr>
														<tr>
															<td width=50% style="text-align:center;vertical-align:top">
																<ul><h3>
																	<li>A distributed database</li>
																	<li>Highly scalable</li>
																	<li>Fault tolerant</li>
																	<li>Consistency is tunable</li>
																	<li>High throughput</li>
																	<li>Network topology aware</li>
																	<li>Multi-DC Active-Active</li>
																	<li>Written in Java</li>
																	<li>A column family</li>
																	<li>CQL3</li>
																</h3></ul>
															</td>
															<td width=50% style="text-align:center;vertical-align:top">
																<ul><h3>
																	<li>ACID compliant database</li>
																	<li>A relational database</li>
																	<li>ANSI SQL compliant</li>
																	<li>A document database</li>
																</h3></ul>
															</td>
														</tr>
													</table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
					</section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
			                						<h1><span class="ING">Tuneable Consistency</span></h1>
													<h3>Configureable Consistency Level (CL)<br>per read and write action</h3><br>
													<table width=100%>
														<tr>
															<td width=50% style="text-align:center;vertical-align:top">
																<h3><span class="ING"><u>Writes</u></h3></span></h3>
																<ul><h3>
																	<li>Any</li>
																	<li>One</li>
																	<li>Two</li>
																	<li>Three</li>
																	<li>Local_Quorum</li>
																	<li>Quorum</li>
																	<li>Each_Quorum</li>
																	<li>All</li>
																</h3></ul>
															</td>
															<td width=50% style="text-align:center;vertical-align:top">
																<h3><span class="ING"><u>Reads</u></span></h3>
																<ul><h3>
																	<br><li>One</li>
																	<li>Two</li>
																	<li>Three</li>
																	<li>Local_Quorum</li>
																	<li>Quorum</li>
																	<li>Each_Quorum</li>
																	<li>All</li>
																</h3></ul>
															</td>
														</tr>
													</table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
					</section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">Logical Grouping</span></h1>
													<table>
														<tr>
															<td width=50% style="vertical-align:middle">
																<h3><span class="ING">Keyspace:</span> group of tables</h3><br>
																<h3><span class="ING">Table:</span> group of data</h3><br>
																<h3><span class="ING">Replication Factor:</span><br>Number of copies of data</h3>
															</td>
															<td width=50% style="vertical-align:middle">
																<img width=90% src="./images/logical_grouping.png" alt="Logical Grouping" style="background-color:white;"></img>
															</td>
														</tr>
													</table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
					</section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">Cassandra Replication Strategy</span></h1>
													<table>
														<tr>
															<td width=60% style="vertical-align:middle">
																<h3>Token Range 0 -> 2<small>127</small>-1 in Ring Formation</h3><br>
																<h3>Consistent Hashing Algorithm</h3><br>
																<h3>Replica nodes in clockwise</h3><br>
																<h3>Gossip protocol between nodes</h3>
															</td>
															<td width=40% style="vertical-align:middle">
																<img width=100% src="./images/cassandra_replication_strategy.png" alt="Cassandra Replication Strategy" style="background-color:white;"></img>
																<small>Replication Factor (RF) = 3</small>
															</td>
														</tr>
													</table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
					</section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">Network Topology Awareness</span></h1><br>
													<img width=50% src="./images/network_topology_awareness.png" alt="Network Topology Awareness" style="background-color:white;"></img>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
					</section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">Strong Consistency</span></h1>
													<img width=75% src="./images/quorum.png" style="background-color:white;"></img>

				                    				<table width="100%">
						                            	<tr>
						                            		<td width="15%"></td>
						                            		<td width="80%"></td>
						                            		<td width="5%"></td>
						                            	</tr>
						                            	<tr>
						                            		<td></td>
						                            		<td>
																<h3>CAP – Consistency, Availability, Partition Tolerance</h3>
																<h3>Consistency is achieved with W + R > RF</h3>
																<h3>Quorum = (Integer) RF / 2 + 1</h3>
						                            		</td>
						                            		<td></td>
						                            	</tr>
						                            </table>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
					</section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">Write Path</span></h1>
													<img width=80% src="./images/write_path.png" alt="Write Path" style="background-color:white;"></img>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
					</section>
					<section data-background="./images/zen_whitestone_2.jpg">
                        <blockquote>
	                    	<table width="97%" height="95%">
	                    		<tr height="5%">
	                    			<td style="text-align:center;vertical-align:middle"><em></em></td>
	                    		</tr>
	                    		<tr height="95%">
	                    			<td style="text-align:center;vertical-align:middle">
	                    				<table width="100%">
			                            	<tr>
			                            		<td height="90%" style="text-align:center;vertical-align:middle">
													<h1><span class="ING">Read Path</span></h1>
													<img width=60% src="./images/read_path.png" alt="Read Path" style="background-color:white;"></img>
			                            		</td>
			                            	</tr>
			                            </table>
	                    			</td>
	                    		</tr>
	                    	</table>
                    	</blockquote>
						<aside class="notes">
							Cassandra performs random reads from SSD in parallel with extremely low latency, unlike most databases. Rotational disks are not recommended. Cassandra reads, as well as writes, data by partition key, eliminating complex queries required by a relational database.
							First, Cassandra checks the Bloom filter. Each SSTable has a Bloom filter associated with it that checks the probability of having any data for the requested partition key in the SSTable before doing any disk I/O.
							If the probability is good, Cassandra checks the partition key cache and takes one of these courses of action:
							•	If an index entry is found in the cache:
							•	Cassandra goes to the compression offset map to find the compressed block having the data.
							•	Fetches the compressed data on disk and returns the result set.
							•	If an index entry is not found in the cache:
							•	Cassandra searches the partition summary to determine the approximate location on disk of the index entry.
							•	Next, to fetch the index entry, Cassandra hits the disk for the first time, performing a single seek and a sequential read of columns (a range read) in the SSTable if the columns are contiguous.
							•	Cassandra goes to the compression offset map to find the compressed block having the data.
							•	Fetches the compressed data on disk and returns the result set.
						</aside>
					</section>
				</section>

				<section>
					<section data-background="./images/black-zen-stones.jpg">
                    	<blockquote>
                        	<h1>CQL3</h1>
                    	</blockquote>
                    </section>
					<section>
						<h2><span class="ING">Why CQL3?</span></h2><br>
						<p>Excellent language for modeling data structures</p>
						<p>Usability</p>
						<p>Readability</p>
						<p>Familiarity</p>
						<p>Programming language agnostic</p>
					</section>
					<section>
						<h2><span class="ING">Apache Thrift, Hector, Astyanax days</span></h2>
						<table height=100%>
							<tr>
								<td width=60% style="vertical-align:middle">
									<pre style="background-color:#625D5D">
Column col = 
    new Column(ByteBuffer.wrap("product".getBytes())));
col.setValue(ByteBuffer.wrap("phone".getBytes());
col.setTimestamp(System.currentTimeMillis());

ColumnOrSuperColumn c = new ColumnOrSuperColumn();
c.setColumn(col);

Mutation m = new Mutation();
m.setColumn_or_supercolumn(c);

List<Mutations> ms = new ArrayList<Mutation>();
ms.add(m);

Map<String, List<Mutations>> cf = 
    new HashMap<String, List<Mutations>>();
cf.put("products", m);

Map<ByteBuffer, Map<String, List<Mutation>>> records = 
    new HashMap<ByteBuffer, Map<String, List<Mutation>>>();
records.put(ByteBuffer.wrap("key".getBytes()), cf);
client.batch_mutate(records, consistencyLevel);
									</pre>
								</td>
								<td width=40% style="vertical-align:middle">
									<img width=100% src="./images/stress.png" style="background-color:white;"></img>
								</td>
							</tr>
						</table>
					</section>
					<section>
						<h2><span class="ING">CQL3</span></h2>
						<br>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
INSERT INTO products (product_id, product) 
     VALUES (“id12321”, “phone”);
						</code></pre>
						<img width=60% src="./images/easy.png" style="background-color:white;"></img>
					</section>
                 </section>

                 <section>
					<section data-background="./images/ZenRocks.jpg">
                    	<blockquote>
                        	<h1>Data Modelling</h1>
                    	</blockquote>
                    </section>
                     <section>
                         <h2><span class="ING">Primary Key</span></h2>
                         <br>
                         <div style="color:#ffffff">
                             <div align="left"><p><span style="color:#ff1493">The Primary Key</span></p></div>
                             <ul>
                                 <li>The key that uniquely identifies a row</li>
                                 <li>A primary key consists of:</li>
                                 <ul>
                                     <li>A (composite) <span style="color:#7cfc00">partition key</span></li>
                                     <li>One or more <span style="color:#E4F173">clustering columns</span><br>
                                         e.g. <span style="color:#ff1493">PRIMARY KEY</span> (<span style="color:#7cfc00">partition key</span>, <span style="color:#E4F173">cluster columns</span>, ...)</li>
                                 </ul>
                                 <li>The <span style="color:#7cfc00">partition key</span> determines on which node the partition resides</li>
                                 <li>Data is ordered in <span style="color:#E4F173">cluster column</span> order within the partition</li>
                             </ul>
                         </div>
                     </section>
                     <section>
                         <h2><span class="ING">Creating a table</span></h2>
                         <br>
                         <table>
                             <tr>
                                 <td width=35% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE cities (
    city_name   varchar,
    elevation   int,
    population  int,
    latitude    float,
    longitude   float,
    PRIMARY KEY (city_name)
);
									</code></pre>
                                 </td>
                                 <td width=65% style="vertical-align:top">
                                     <p>We can visualize it this way:</p>
                                     <img width=100% src="./images/simple_table.png" style="background-color:white;"></img>
                                     <p>In this example:<br>partition key = primary key</p>
                                 </td>
                             </tr>
                         </table>
                     </section>
                     <section>
                         <h2><span class="ING">Composite partition key</span></h2>
                         <br>
                         <table>
                             <tr>
                                 <td width=40% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE cities (
  city_name   varchar,
  state varchar,
  elevation float,
  latitude float,
  longitude float
  population float,
  PRIMARY KEY 
     ( (city_name,state) )
);
									</code></pre>
                                 </td>
                                 <td width=60% style="vertical-align:top">
                                     <img width=100% src="./images/composite_partition_key.png" style="background-color:white;"></img>
                                     <p>Each city gets it own partition!</p>
                                 </td>
                             </tr>
                         </table>
                     </section>
					<section>
						<h2><span class="ING">Clustering columns</span></h2>
						<br>
						<table>
							<tr>
								<td width=45% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE sporty_league (
   team_name   varchar,
   player_name varchar,
   jersey      int,
   PRIMARY KEY (team_name,
                player_name)
);
									</code></pre>
								</td>
								<td width=55% style="vertical-align:top">
									<img width=100% src="./images/composite_table.png" style="background-color:white;"></img>
								</td>
							</tr>
						</table>
				    </section>
                    <section>
                         <h2><span class="ING">Simple Select</span></h2>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">

SELECT * 
  FROM sporty_league;
						</code></pre>
                         <table width=100%>
                             <tr>
                                 <td width=50% style="vertical-align:middle">
                                     <img width=100% src="./images/simple_select.png" style="background-color:white;"></img>
                                 </td>
                                 <td width=50% style="vertical-align:middle">
                                     <img width=100% src="./images/composite_table.png" style="background-color:white;"></img>
                                 </td>
                             </tr>
                         </table>
                         <br><br>
                         <p>"Table scan" - slow! (Limited to 10,000 rows by default)</p>
                         <p>Use LIMIT keyword to choose fewer or more rows</p>
                    </section>
                    <section>
                        <h2><span class="ING">Simple Select on Partition Key and Cluster Columns</span></h2>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
SELECT * 
  FROM sporty_league 
 WHERE team_name = 'Mighty Mutts';						
						</code></pre>
                        <img width=60% src="./images/simple_select_cc1.png" style="background-color:white;"></img>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
SELECT * 
  FROM sporty_league 
 WHERE team_name = 'Mighty Mutts'
   AND player_name = 'Lucky';
						</code></pre>
                        <img width=60% src="./images/simple_select_cc2.png" style="background-color:white;"></img>
                    </section>
                    <section>
                        <h2><span class="ING">Insert/Update</span></h2>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
INSERT INTO sporty_league (team_name, player_name, jersey)
VALUES ('Mighty Mutts','Felix',90);
						</code></pre>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
UPDATE sporty_league 
   SET jersey = 100
 WHERE team_name = 'Mighty Mutts' 
   AND player_name = 'Felix';
						</code></pre>
                    </section>
                    <section>
                        <h2><span class="ING">Counters</span></h2>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE sporty_league (
   team_name   varchar,
   player_name varchar,
   jersey      int,
   scores      counter,
   PRIMARY KEY (team_name, player_name, jersey)
);
						</code></pre>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
UPDATE sporty_league 
   SET scores = scores + 1
 WHERE team_name = 'Mighty Mutts' 
   AND player_name = 'Buddy'
   AND jersey = '32';
						</code></pre>
                    </section>
                    <section>
                        <h2><span class="ING">Data Types</span></h2>
                        <img width=50% src="./images/data_types.png" style="background-color:white;"></img>
                    </section>
                    <section>
                        <h2><span class="ING">Collections</span></h2>
                        <br>
                        <div align="left"><p>CQL supports having columns that contain collections of data</p>
                        	<table width=100%>
                        		<tr>
                        			<td width=40%>
                        				<pre>
The collection types include:
Set, List and Map

(64K max limitation)
										</pre>
                        			</td width=60%>
                        			<td>
                        				<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE collections_example (
    id int PRIMARY KEY,
    set_example set&lt;text>,
    list_example list&lt;text>,
    map_example map&lt;int, text>
);
										</code></pre>
                        			</td>
                        		</tr>
                        	</table>
                            <p>These data types are intended to support the type of 1-to-many relationships that can be modeled in a relational DB e.g. a user has many email addresses</p><br>
                            <p>Some performance considerations around collections</p>
                         </div>
                         <ul>
                            <li>Often more efficient to denormalise further rather than use collections if intending to store lots of data.</li>
                            <li>Favour sets over list – lists not very performant</li>
                         </ul>
                    </section>
                    <section>
                         <h2><span class="ING">Performance<br>considerations</span></h2>
                         <br>
                         <p>The best queries are in a single partition.</p>
                         <small>i.e. WHERE partition key = <something></small>
                         <p>Queries that span multiple partitions are <span style="color:red">s-l-o-w</span></p>
                         <small>i.e. WHERE partition key IN ( <something> , <something> , ... );</small>
                         <p>Queries that span multiple cluster columns are <span style="color:green">fast</span></p>
                        <small>i.e. WHERE partition key = <something> and clustering key = <something></small>
                    </section>
                     <section>
                         <h2><span class="ING">(Clustering) Order By</span></h2>
                         <br>
                         <table>
                             <tr>
                                 <td width=45% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
SELECT * 
  FROM sporty_league
 WHERE team_name = 'Mighty Mutts'
 ORDER BY player_name DESC;
									</code></pre>
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE sporty_league (
   team_name   varchar,
   player_name varchar,
   jersey      int,
   PRIMARY KEY
        (team_name, player_name)
) WITH CLUSTERING ORDER BY
        (player_name DESC);
									</code></pre>
                                 </td>
                                 <td width=55% style="vertical-align:top">
                                     <p>Partition keys are not ordered!</p>
                                     <p>You can only order by a clustering column</p>
                                     <p>Data will ordered ASCending by default</p>
                                     <p>You can also use the ORDER BY keyword, but only on the clustering column(s), which don't have CLUSTERING ORDER BY defined!</p>
                                 </td>
                             </tr>
                         </table>
                     </section>
                     <section>
                         <h2><span class="ING">De-normalize</span></h2>
                         <br>
                         <table width=100%>
                             <tr>
                                 <th class="ING">Don't do this</th>
                                 <th class="ING">Do this instead</span></th>
                             </tr>
                             <tr>
                                 <td width=45% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE users (
	id uuid PRIMARY KEY,
	username text,
	email text,
	street_address text,
	town text,
);

CREATE INDEX user_street ON 
    users (street_address);
CREATE INDEX user_town ON 
    users (town);

SELECT * 
  FROM users 
 WHERE town = 'Stockholm' 
   AND street_address = 'Sankt Eriksgatan'
 ALLOW FILTERING;
									</code></pre>
                                 </td>
                                 <td width=45% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE users (
	id uuid PRIMARY KEY,
	username text,
	email text,
	street_address text,
	town text,
);




CREATE TABLE user_street (
	town text,
	street text,
	user_id uuid,
	PRIMARY KEY (
           (town, street),user_id)
); 
									</code></pre>
                                 </td>
                             </tr>
                         </table>
                     </section>



                     <section>
                         <h2><span class="ING">Time to Live (TTL)</span></h2>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">

INSERT INTO users (id, first, last)
VALUES ('abc123', 'abe', 'lincoln')
 USING TTL 3600; // Expires data in one hour
						</code></pre>
                     </section>
                     <section>
                         <h2><span class="ING">Time Series</span></h2>
                         <br>
                         <table width=100%>
                             <tr>
                                 <td width=50% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
CREATE TABLE sensor_data (
  sensor_id int,
  date varchar,
  time timeuuid,
  value int,
  PRIMARY KEY( (sensor_id, date), time ) )
WITH CLUSTERING ORDER BY (time DESC);
									</code></pre>
                                 </td>
                                 <td width=50% style="vertical-align:top">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
INSERT INTO sensor_data
       (sensor_id, date, time, value)
VALUES (1, '20130908',
       1883-11e3-8ffd-0800200c9a66,432)
 USING TTL 604800;
									</code></pre>
                                 </td>
                             </tr>
                             <tr>
                                 <td colspan="2" style="vertical-align:top; margin-left:auto; margin-right:auto">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
SELECT time, value, TTL (value) 
  FROM sensor_data
 WHERE sensor_id = 1 AND date = '20130908'
   AND time > maxTimeuuid('2013-09-08 10:05+0000')
   AND time < minTimeuuid('2013-09-08 15:00+0000');
									</code></pre>
                                 </td>
                             </tr>
                             <tr>
                                 <td colspan="2" style="vertical-align:top; margin-left:auto; margin-right:auto">
									<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
time                        | value | ttl(value)
----------------------------+-------+------------
1883-11e3-8ffd-0800200c9a66 |   432 |     604257
1887-11e3-8ffd-0800200c9a66 |   433 |     604452
									</code></pre>
                                 </td>
                             </tr>
                         </table>
                     </section>
                     <section>
                         <h2><span class="ING">Lightweight Transactions</span></h2>
                         <p>Introduced in Cassandra 2.0</p>
                         <p>Example:</p>
						<pre><code class="sql" data-trim contenteditable style="font-size: 16px;">
INSERT INTO customer_account (customerID, customer_email)
VALUES ('LauraS', 'lauras@gmail.com')
    IF NOT EXISTS;

UPDATE customer_account 
   SET customer_email='laurass@gmail.com'
    IF customer_email='lauras@gmail.com';
						</code></pre>
                         <p>Great for 1% of your application – but not recommended to be used too much!</p>
                     </section>

                     <section>
                         <h2><span class="ING">Tracing</span></h2>
                         <br>
                         <p>You can turn on tracing on or off for queries with the TRACING ON | OFF command</p>
                         <p>This can help you understand what Cassandra is doing and identify any performance problems</p>
                         <img width=100% src="./images/tracing.png" style="background-color:white;"></img>
                         <p><a href="http://www.datastax.com/dev/blog/tracing-in-cassandra-1-2">http://www.datastax.com/dev/blog/tracing-in-cassandra-1-2</a></p>
                     </section>

				</section>

                <section>
                    <em><span class="ING">all challenges appear again...</span></em><br><br>
                    <p>Improve <span class="ING">availability</span></p>
                    <p>Aim to be <span class="ING">scalable</span></p>
                    <p>Adopt <span class="ING">new</span> ways of thinking</p>
                </section>
                <section>
                    <section>
                        <h2><span class="ING">3 Facts</span></h2>
                    </section>
                    <section>
                        <p><span class="ING">fact 1</span></p><h2><span class="ING">Availability</span> is easier</h2>
                    </section>
                    <section>
                        <em><span class="ING">availability is easier, because</span></em><br><br>
                        <h2><span class="ING">Masterless</span> architecture</h2>
                        <p><span class="ING">No outages</span> in contrast to master-slave architecture</p>
                        <p>This does make C* <span class="ING">chatty</span></p>
                    </section>
                    <section>
                        <em><span class="ING">availability is easier, because</span></em><br><br>
                        <h2><span class="ING">Replication</span> of data</h2>
                        <p>Replication factor is <span class="ING">configurable</span> per keyspace</p>
                        <p>Increasing nodes <span class="ING">does not</span> mean higher availability<br>Increasing the replication factor <span class="ING">does</span></p>
                    </section>
                    <section>
                        <p><span class="ING">fact 2</span></p><h2><span class="ING">Performance</span> is easier</h2>
                    </section>
                    <section>
                        <em><span class="ING">performance is easier, and</span></em><br><br>
                        <h2>Solve your <span class="ING">reads</span> with your <span class="ING">writes</span></h2>
                        <p><span class="ING">De-normalization</span> is acceptable for solving reads</p>
                    </section>
                    <section>
                        <em><span class="ING">performance is easier, but</span></em><br><br>
                        <h2>Know your <span class="ING">partitions</span></h2>
                        <p><span class="ING">Large</span> partitions will hurt!</p>
                        <img src="./images/partitioning_table.jpg" alt="Partitioning">
                    </section>
                    <section>
                        <em><span class="ING">performance is easier, because</span></em><br><br>
                        <h2><span class="ING">Linear</span> scalable</h2>
                        <p>Adding nodes will increase your throughput through <span class="ING">sharding</span></p>
                        <img width=50% src="./images/linear_scalable.jpg" alt="Linear scalability">
                        <br><br><small>source: <a href="http://www.datastax.com/wp-content/uploads/2013/02/WP-Benchmarking-Top-NoSQL-Databases.pdf" target="_blank"><span class="ING">Datastax</span></a></small>
                    </section>
                    <section>
                        <p><span class="ING">fact 3</span></p><h2><span class="ING">Consistency</span> is harder</h2>
                    </section>
                    <section>
                        <em><span class="ING">consistency is harder, and</span></em><br><br>
                        <h2>Application <span class="ING">developer</span> has much more responsibility</h2>
                        <p>Focus on the <span class="ING">data model</span> and the <span class="ING">flow</span> of data is key</p>
                        <p><span class="ING">noSQL</span> versus <span class="ING">SQL</span></p>
                    </section>
                    <section>
                        <em><span class="ING">consistency is harder, because</span></em><br><br>
                        <h2>CAP theorem</h2>
                        <p><span class="ING">Consistency</span> (all nodes see the same data at the same time)</p>
                        <p><span class="ING">Availability</span> (a guarantee that every request receives a response about whether it was successful or failed)</p>
                        <p><span class="ING">Partition tolerance</span> (the system continues to operate despite arbitrary message loss or failure of part of the system)</p>
                    </section>
                    <section>
                        <em><span class="ING">consistency is harder, because</span></em><br><br>
                        <h2>Transactions and queuing are <span class="ING">anti-patterns</span></h2>
                        <p>C* v2.0 <span class="ING">reduces</span> the complexity by using lightweight transactions (paxos)</p>
                    </section>
                </section>
                <section>
                    <em><span class="ING">all facts appear...</span></em><br><br>
                    <p><span class="ING">Availability</span> is easier<span> | <span class="ING">challenge 1: </span> availability & consistency</span></p>
                    <p><span class="ING">Performance</span> is easier<span > | <span class="ING">challenge 2</span> easier scalable</span></p>
                    <p ><span class="ING">Consistency</span> is harder<span> | <span class="ING">challenge *</span> availability & consistency, easier scalable, new way of thinking</span></p>
                    <br><em ><span class="ING">all challenges covered...</span></em>
                </section>

                <section>
	                <section>
	                    <h2><span class="ING">C*@ING</span></h2>
	                    <table width=100% style="font-size: 22px">
	                    	<tr style="border-bottom: 3px solid #ff6600;">
	                    		<th style="font-size: 30px" width=30%><span class="ING">project<br></span></th>
	                    		<th style="font-size: 30px" width=35%><span class="ING">use case<br></span></th>
	                    		<th style="font-size: 30px" width=35%><span class="ING">status<br></span></th>
	                    	</tr>
							<tr>
		                    	<td style="background-color: #625D5D;">Betelgeuze</td>
		                    	<td style="background-color: #625D5D;">Cache of Customer Data (KRO)</td>
		                    	<td style="background-color: #625D5D;">September 2014 in PRD</td>
		                    </tr>
		                    <tr>
		                    	<td>OI: Financial Fit</td>
		                    	<td>SOR for soft data</td>
		                    	<td>September 2014 in PRD</td>
		                    </tr>
		                    <tr>
		                    	<td style="background-color: #625D5D;">RTPE</td>
		                    	<td style="background-color: #625D5D;">New payments engine for on-us payments</td>
		                    	<td style="background-color: #625D5D;">February 2015 in PRD</td>
		                    </tr>
							<tr>
		                    	<td>Faster Than Light</td>
		                    	<td>Cache of Customer Data (MDM)</td>
		                    	<td>PoC</td>
		                    </tr>
		                    <tr>
		                    	<td style="background-color: #625D5D;">Ideal,<br>Sales Support,<br>NGINX,<br>...</td>
		                    	<td style="background-color: #625D5D;">Session Management</td>
		                    	<td style="background-color: #625D5D;">In DEV</td>
		                    </tr>
		                    <tr>
		                    	<td>Ideal</td>
		                    	<td>Order Management</td>
		                    	<td>Product Backlog</td>
		                    </tr>
		                    <tr>
		                    	<td style="background-color: #625D5D;">Credit Cards</td>
		                    	<td style="background-color: #625D5D;">Cache external data</td>
		                    	<td style="background-color: #625D5D;">Awaiting budget</td>
		                    </tr>
		                    <tr>
		                    	<td>Availability Dashboard</td>
		                    	<td>Time series</td>
		                    	<td>In DEV</td>
		                    </tr>
		                    <tr>
		                    	<td style="background-color: #625D5D;">Realtime Account Forecasting</td>
		                    	<td style="background-color: #625D5D;">Cache of SAM data</td>
		                    	<td style="background-color: #625D5D;">PoC</td>
		                    </tr>
		                </table>
	                </section>
	            </section>

                <section>
	                <section>
	                    <h2><span class="ING">3 Questions - Bonus</span></h2>
	                </section>
                    <section>
                        <p><span class="ING">question 1</span></p><h2>What <span class="ING">risks</span> do we have with<br><span class="ING">2 DC's</span> and using Write/Read CL of <span class="ING">LOCAL_QUORUM</span>?</h2>
                        <img src="./images/question1.jpg" alt="Question 1">
                    </section>
                    <section>
                        <h2><span class="ING">Split-brain</span></h2>
                        <img src="./images/split_brain.jpg" alt="Split brain">
                        <p>Who wins? <span class="ING">Neither</span> side knows the other side!</p>
                    </section>
                    <section>
                        <h2>CAP theorem - <span class="ING">choose</span> wisely</h2>
                        <p>Use QUORUM but <span class="ING">risk availability</span><br>when there are issues with the WAN link</p>
                        <p>Arrange a third DC... <span class="ING">&euro;&euro;&euro;</span></p>
                        <p>Applications apply DC stickiness<br>whilst processing data which <span class="ING">increases complexity</span></p>
                    </section>
                    <section>
                        <p><span class="ING">question 2</span></p><h2>Does QUORUM read and QUORUM write <span class="ING">guarantee</span> consistency?</h2>
                    </section>
                    <section>
                        <h2><span class="ING">No</span> - it gives strong consistency</h2>
                        <p class="fragment"><span class="ING">NTP</span> must be set-up correctly
                            <br>Know your <span class="ING">flow</span> of data
                            <br>Model as <span class="ING">idem-potent-ly</span> as possible
                            <br><img src="./images/timesync_issue.jpg" alt="NTP issue"></p>
                    </section>
                    <section>
                        <p><span class="ING">question 3</span></p><h2>Will C* solve <span class="ING">all</span> your IT issues?</h2>
                    </section>
                    <section>
                        <h2><span class="ING">No</span> - but it will help solve a lot of your problems</h2>
                        <p >Performance and availability are <span class="ING">tuneable</span> based on needs and costs</p>
                        <p >Consistency is solved by <span class="ING">design</span> and knowing the <span class="ING">flow</span> of data</p>
                        <p >Going from SQL to noSQL is a <span class="ING">paradigm</span> shift</p>
                        <p ><span class="ING">Skills</span> are not readily available</p>
                        <p>Some issues are better solved by <span class="ING">relational</span> databases</p>
                    </section>
                </section>

				<section>
					<p>Thank you</p>
					<em>...graceful bow</em>
					<br><br><br>
					Contact<br>	
					<a href="mailto:christopher.reedijk@ing.nl"><span class="ING">christopher.reedijk@ing.nl</span></a><br>
					<a href="mailto:gary.stewart@ing.nl"><span class="ING">gary.stewart@ing.nl</span></a><br><br>
					<!--<em>We're hiring!</em><br>-->
					<img src="./images/ing-logo.gif" alt="ING">
				</section>
				
			</div>					
		</div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				mouseWheel: true,

				width: 1800,
    			height: 900,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>
	</body>
</html>
